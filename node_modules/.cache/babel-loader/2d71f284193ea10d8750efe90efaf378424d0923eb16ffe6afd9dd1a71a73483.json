{"ast":null,"code":"var _jsxFileName = \"/Users/alanschmidt/Work/pokedex/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport \"./App.css\";\nimport NavBar from \"./components/Navbar\";\nimport Searchbar from \"./components/Searchbar\";\nimport Pokedex from \"./components/Pokedex\";\nimport { getPokemons, getPokemonData, searchPokemon } from \"./api\";\nimport { FavoriteProvider } from \"./contexts/favoritesContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst localStorageKey = \"favorite_pokemon\";\nfunction App() {\n  _s();\n  const [pokemons, setPokemons] = useState([]);\n  const [page, setPage] = useState(0);\n  const [total, setTotal] = useState(0);\n  const [loading, setLoading] = useState(true);\n  const [favorites, setFavorites] = useState([]);\n  const [notFound, setNotFound] = useState(false);\n  const [searching, setSearching] = useState(false);\n  const fetchPokemons = async () => {\n    try {\n      setLoading(true);\n      const data = await getPokemons(25, 25 * page);\n      const promises = data.results.map(async pokemon => {\n        return await getPokemonData(pokemon.url);\n      });\n      const results = await Promise.all(promises);\n      setPokemons(results);\n      setLoading(false);\n      setTotal(Math.ceil(data.count / 25));\n      setNotFound(false);\n    } catch (error) {}\n  };\n  const loadFavoritePokemons = () => {\n    const pokemons = JSON.parse(window.localStorage.getItem(localStorageKey)) || [];\n    setFavorites(pokemons);\n  };\n  useEffect(() => {\n    loadFavoritePokemons();\n  }, []);\n  useEffect(() => {\n    if (!searching) {\n      fetchPokemons();\n    }\n  }, [page]);\n  const updateFavoritePokemons = name => {\n    const updated = [...favorites];\n    const isFavrorite = updated.indexOf(name);\n    if (isFavrorite >= 0) {\n      updated.splice(isFavrorite, 1);\n    } else {\n      updated.push(name);\n    }\n    setFavorites(updated);\n    window.localStorage.setItem(localStorageKey, JSON.stringify(updated));\n  };\n  const onSearch = async pokemon => {\n    if (!pokemon) {\n      return fetchPokemons();\n    }\n    setLoading(true);\n    setNotFound(false);\n    setSearching(true);\n    const result = await searchPokemon(pokemon);\n    setPokemons([result]);\n    if (!result) {\n      setNotFound(true);\n      setLoading(false);\n      return;\n    } else {\n      setPokemons([result]);\n      setPage(0);\n      setTotal(1);\n    }\n    setLoading(false);\n    setSearching(false);\n  };\n  return /*#__PURE__*/_jsxDEV(FavoriteProvider, {\n    value: {\n      favoritePokemons: favorites,\n      updateFavoritePokemons: updateFavoritePokemons\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(NavBar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"App\",\n        children: [/*#__PURE__*/_jsxDEV(Searchbar, {\n          onSearch: onSearch\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this), notFound ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"not-found-text\",\n          children: [\"No se encontro el Pokemon que buscabas :(\", \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(Pokedex, {\n          loading: loading,\n          pokemons: pokemons,\n          page: page,\n          setPage: setPage,\n          total: total\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"0OzLZfUS7rGmADdk2glByDdz0F4=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","NavBar","Searchbar","Pokedex","getPokemons","getPokemonData","searchPokemon","FavoriteProvider","localStorageKey","App","pokemons","setPokemons","page","setPage","total","setTotal","loading","setLoading","favorites","setFavorites","notFound","setNotFound","searching","setSearching","fetchPokemons","data","promises","results","map","pokemon","url","Promise","all","Math","ceil","count","error","loadFavoritePokemons","JSON","parse","window","localStorage","getItem","updateFavoritePokemons","name","updated","isFavrorite","indexOf","splice","push","setItem","stringify","onSearch","result","favoritePokemons"],"sources":["/Users/alanschmidt/Work/pokedex/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport \"./App.css\";\nimport NavBar from \"./components/Navbar\";\nimport Searchbar from \"./components/Searchbar\";\nimport Pokedex from \"./components/Pokedex\";\nimport { getPokemons, getPokemonData, searchPokemon } from \"./api\";\nimport { FavoriteProvider } from \"./contexts/favoritesContext\";\n\nconst localStorageKey = \"favorite_pokemon\";\n\nfunction App() {\n  const [pokemons, setPokemons] = useState([]);\n  const [page, setPage] = useState(0);\n  const [total, setTotal] = useState(0);\n  const [loading, setLoading] = useState(true);\n  const [favorites, setFavorites] = useState([]);\n  const [notFound, setNotFound] = useState(false);\n  const [searching, setSearching] = useState(false);\n\n  const fetchPokemons = async () => {\n    try {\n      setLoading(true);\n      const data = await getPokemons(25, 25 * page);\n      const promises = data.results.map(async (pokemon) => {\n        return await getPokemonData(pokemon.url);\n      });\n      const results = await Promise.all(promises);\n      setPokemons(results);\n      setLoading(false);\n      setTotal(Math.ceil(data.count / 25));\n      setNotFound(false);\n    } catch (error) {}\n  };\n\n  const loadFavoritePokemons = () => {\n    const pokemons =\n      JSON.parse(window.localStorage.getItem(localStorageKey)) || [];\n\n    setFavorites(pokemons);\n  };\n\n  useEffect(() => {\n    loadFavoritePokemons();\n  }, []);\n\n  useEffect(() => {\n    if (!searching) {\n      fetchPokemons();\n    }\n  }, [page]);\n\n  const updateFavoritePokemons = (name) => {\n    const updated = [...favorites];\n    const isFavrorite = updated.indexOf(name);\n    if (isFavrorite >= 0) {\n      updated.splice(isFavrorite, 1);\n    } else {\n      updated.push(name);\n    }\n    setFavorites(updated);\n    window.localStorage.setItem(localStorageKey, JSON.stringify(updated));\n  };\n\n  const onSearch = async (pokemon) => {\n    if (!pokemon) {\n      return fetchPokemons();\n    }\n    setLoading(true);\n    setNotFound(false);\n    setSearching(true);\n    const result = await searchPokemon(pokemon);\n    setPokemons([result]);\n    if (!result) {\n      setNotFound(true);\n      setLoading(false);\n      return;\n    } else {\n      setPokemons([result]);\n      setPage(0);\n      setTotal(1);\n    }\n    setLoading(false);\n    setSearching(false);\n  };\n\n  return (\n    <FavoriteProvider\n      value={{\n        favoritePokemons: favorites,\n        updateFavoritePokemons: updateFavoritePokemons,\n      }}\n    >\n      <div>\n        <NavBar />\n        <div className=\"App\">\n          <Searchbar onSearch={onSearch} />\n          {notFound ? (\n            <div className=\"not-found-text\">\n              No se encontro el Pokemon que buscabas :({\" \"}\n            </div>\n          ) : (\n            <Pokedex\n              loading={loading}\n              pokemons={pokemons}\n              page={page}\n              setPage={setPage}\n              total={total}\n            />\n          )}\n        </div>\n      </div>\n    </FavoriteProvider>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}